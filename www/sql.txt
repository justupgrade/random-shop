CREATE TABLE items (
	id INT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY,
	name VARCHAR(128) NOT NULL,
	price FLOAT(5,2) NOT NULL,
	description VARCHAR(128) NOT NULL,
	amount SMALLINT UNSIGNED DEFAULT 1,
	category_id INT UNSIGNED NOT NULL,
	FOREIGN KEY(category_id) REFERENCES categories(id) 
);

CREATE TABLE pictures (
	id INT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY,
	path VARCHAR(128) NOT NULL,
	item_id INT UNSIGNED NOT NULL,
	FOREIGN KEY(item_id) REFERENCES items(id) ON DELETE CASCADE
);

CREATE TABLE categories (
	id INT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY,
	name VARCHAR(128) NOT NULL,
	parent_id INT UNSIGNED NOT NULL
);

CREATE TABLE users (
	id INT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY,
	email VARCHAR(128) NOT NULL UNIQUE,
	name VARCHAR(128),
	surname VARCHAR(128),
	password VARCHAR(128),
	street VARCHAR(128),
	postal_code VARCHAR(6),
	city VARCHAR(128)
);

CREATE TABLE orders ( 
	id INT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY,
	status TINYINT UNSIGNED DEFAULT 0,
	user_id INT UNSIGNED NOT NULL,
	date datetime,
	FOREIGN KEY(user_id) REFERENCES users(id) ON DELETE CASCADE
);

CREATE TABLE orders_items (
	id INT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY,
	order_id INT UNSIGNED NOT NULL,
	item_id INT UNSIGNED NOT NULL,
	amount SMALLINT UNSIGNED DEFAULT 1,
	FOREIGN KEY(order_id) REFERENCES orders(id) ON DELETE CASCADE,
	FOREIGN KEY(item_id) REFERENCES items(id) ON DELETE CASCADE
);

CREATE TABLE admins (
	id INT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY,
	email VARCHAR(128) NOT NULL,
	pass VARCHAR(128) NOT NULL
);